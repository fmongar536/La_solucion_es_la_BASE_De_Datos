<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>4. Del diagrama al c√≥digo: bienvenido a SQL | La soluci√≥n: una base de datos </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Bel√©n Lara Aznar" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.9 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<link rel="stylesheet" type="text/css" href="udl-content.css" />
<script type="text/javascript" src="udl-content.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-9"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegaci√≥n</a></p>
<header id="header" ><div id="headerContent">La soluci√≥n: una base de datos</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Del dato a la soluci√≥n</a></li>
   <li><a href="1_del_dato_al_conocimiento_el_poder_de_la_informacin.html" class="no-ch">1. Del dato al conocimiento: el poder de la informaci√≥n</a></li>
   <li><a href="2_del_problema_a_la_solucin.html" class="daddy">2. Del problema a la soluci√≥n</a>
   <ul class="other-section">
      <li><a href="21_fundamentos_de_las_bases_de_datos_lo_esencial_para_empezar.html" class="no-ch">2.1 Fundamentos de las bases de datos: lo esencial para empezar</a></li>
   </ul>
   </li>
   <li><a href="3_de_las_ideas_al_diseo_construimos_el_modelo_de_datos.html" class="daddy">3. De las ideas al dise√±o: construimos el modelo de datos</a>
   <ul class="other-section">
      <li><a href="31_dibuja_tu_base_de_datos_el_modelo_conceptual.html" class="no-ch">3.1 Dibuja tu base de datos: el modelo conceptual</a></li>
      <li><a href="32_de_los_esquemas_al_sistema_crea_las_tablas_y_normaliza_tu_base_de_datos.html" class="no-ch">3.2 De los esquemas al sistema: crea las tablas y normaliza tu base de datos</a></li>
   </ul>
   </li>
   <li id="active"><a href="4_del_diagrama_al_cdigo_bienvenido_a_sql.html" class="active daddy">4. Del diagrama al c√≥digo: bienvenido a SQL</a>
   <ul>
      <li><a href="41_cuando_los_datos_crecen_big_data_y_nuevas_formas_de_almacenarlos.html" class="no-ch">4.1 Cuando los datos crecen: Big Data y nuevas formas de almacenarlos</a></li>
   </ul>
   </li>
   <li><a href="5_finalicemos_el_proyecto.html" class="no-ch">5. Finalicemos el proyecto</a></li>
   <li><a href="9_conclusin.html" class="no-ch">9. Conclusi√≥n</a></li>
   <li><a href="crditos.html" class="no-ch">Cr√©ditos</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="32_de_los_esquemas_al_sistema_crea_las_tablas_y_normaliza_tu_base_de_datos.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><span class="page-counter">P√°gina <strong>8</strong> de <strong>12</strong></span> <span class="sep">| </span><a href="41_cuando_los_datos_crecen_big_data_y_nuevas_formas_de_almacenarlos.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">4. Del diagrama al c√≥digo: bienvenido a SQL</h1></header>
<article class="iDevice_wrapper UDLcontentIdevice" id="id44">
<div class="iDevice emphasis0" >
<div id="ta44_735_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-engagement"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p style="text-align: justify;"><img src="retor_adultos_sin_bocadillo.gif" alt="R√©tor dice:" title="R√©tor dice:" style="float: left;" width="125" height="125"></p>
<p>üß† ¬°Nuestro proyecto sigue avanzando paso a paso!</p>
<p>Hasta ahora, ya has superado con √©xito las dos primeras fases del desarrollo del sistema <strong>AgendaClientesApp</strong>: la <strong>planificaci√≥n</strong> y el <strong>dise√±o</strong>.</p>
<p>Has aprendido a identificar requisitos, definir entidades y relaciones, y representar toda la estructura de datos en un <strong>modelo E/R</strong> completo. ¬°Buen trabajo!</p>
<p>Ahora comienza una nueva etapa: <strong>la implementaci√≥n</strong>. Es el momento de transformar tu dise√±o en un sistema funcional.</p>
<p>Para ello, aprender√°s un nuevo lenguaje de programaci√≥n especializado en bases de datos: <strong>SQL</strong>. Con √©l podr√°s <em>crear tablas, insertar datos, realizar consultas, actualizaciones y eliminar informaci√≥n</em>... en resumen, controlar toda tu base de datos de forma profesional.</p>
<p>No te preocupes si nunca has usado este lenguaje: iremos paso a paso, con explicaciones claras, ejemplos reales y el apoyo de tu profesor y tus compa√±eros. ¬°Es hora de llevar tu dise√±o al mundo real!</p></div></div></section></div>
</div>
</div>
</article>
<article class="iDevice_wrapper UDLcontentIdevice em_iDevice em_iDevice_udl_exp_tareagrupal" id="id45">
<div class="iDevice emphasis1" >
<header class="iDevice_header"><h1 class="iDeviceTitle">1. Antes del c√≥digo: relaciones y l√≥gica</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta45_734_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-expression"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p style="text-align: justify;"><img src="IMG_PRO2BAC_REA04_CODIFICANDO.jpg" alt="Imagen que muestra la pantalla de un ordenador con distintas operaciones de codificaci√≥n en un lenguaje de programaci√≥n a su alrededor." title="Codificando" style="float: left; margin-right: 10px; margin-left: 10px;" width="200" height="200"></p>
<p>Antes de comenzar a programar con SQL, necesitamos entender muy bien c√≥mo se relacionan los datos entre s√≠. No se trata solo de escribir c√≥digo, sino de <strong>pensar con l√≥gica</strong> c√≥mo se conecta la informaci√≥n.</p>
<p>Cada tabla de una base de datos guarda un tipo de datos distinto, pero muchas veces necesitas combinar varias tablas para responder a una sola pregunta. ¬øC√≥mo se hace eso? ¬°Aplicando la l√≥gica de las relaciones!</p>
<p>Para practicarlo, vamos a analizar una base de datos de ejemplo: un <strong>sistema de gesti√≥n de alquileres de pel√≠culas</strong> en un videoclub. Antes de escribir nada en SQL, escribir√°s las instrucciones en lenguaje natural: paso a paso, c√≥mo se relacionan las tablas y c√≥mo podr√≠as obtener la informaci√≥n que se pide.</p>
<p style="text-align: center;">¬°Es el momento de conectar ideas antes de programar!</p></div></div></section><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><div style="background-color: #e6f4ff; border: 2px solid #2196f3; padding: 15px; border-radius: 8px;">
<h3 style="color: #0b5394;">üß© Actividad: Analiza la base de datos del videoclub</h3>
<p>A continuaci√≥n, vais a trabajar en grupo sobre una base de datos de ejemplo que gestiona los alquileres de un videoclub. Observad las tablas que la componen y responded, paso a paso, a las siguientes cuestiones utilizando el sentido l√≥gico y lo que ya sab√©is sobre relaciones entre tablas:</p>
<ol>
<li><strong>¬øEn qu√© orden crear√≠ais las tablas en la base de datos?</strong></li>
<li><strong>¬øPor qu√© es necesario seguir ese orden para insertar los datos correctamente?</strong></li>
<li><strong>Explicad qu√© relaciones entre las tablas utilizar√≠ais para obtener lo siguiente:</strong>
<ul>
<li>Consultar los pr√©stamos que han tenido una duraci√≥n superior a dos d√≠as, visualizando el nombre del socio y el t√≠tulo de la pel√≠cula.</li>
<li>Mostrar el nombre y el n√∫mero de tel√©fono de socios que tienen pel√≠culas en su casa.</li>
<li>Calcular cu√°nto dinero ha gastado <em>Mar√≠a L√≥pez Perdig√≥n</em> en el videoclub.</li>
</ul>
</li>
</ol>
<p>üí¨ <strong>Trabajad las respuestas en grupo y explicad cada consulta paso a paso, en lenguaje natural.</strong></p>
</div>
<div class="exe-fx exe-tabs">
<h2>Pel√≠culas</h2>
<table class="exe-table" style="width: 66.0698%;">
<thead>
<tr>
<th style="width: 6.50262%;">Pel√≠cula</th>
<th style="width: 38.1192%;">T√≠tulo</th>
<th style="width: 1.61031%;">Tema</th>
<th style="width: 17.7955%;">A√±o</th>
<th style="width: 17.4287%;">Pa√≠s</th>
<th style="width: 18.9329%;">Precio</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 6.50262%;">1</td>
<td style="width: 38.1192%;">Two Much</td>
<td style="width: 1.61031%;">Comedia</td>
<td style="width: 17.7955%;">1995</td>
<td style="width: 17.4287%;">Espa√±a</td>
<td style="width: 18.9329%;">3</td>
</tr>
<tr>
<td style="width: 6.50262%;">2</td>
<td style="width: 38.1192%;">Tesis</td>
<td style="width: 1.61031%;">Suspense</td>
<td style="width: 17.7955%;">1996</td>
<td style="width: 17.4287%;">Espa√±a</td>
<td style="width: 18.9329%;">3</td>
</tr>
<tr>
<td style="width: 6.50262%;">3</td>
<td style="width: 38.1192%;">Desperado</td>
<td style="width: 1.61031%;">Acci√≥n</td>
<td style="width: 17.7955%;">1995</td>
<td style="width: 17.4287%;">EEUU</td>
<td style="width: 18.9329%;">3,5</td>
</tr>
<tr>
<td style="width: 6.50262%;">4</td>
<td style="width: 38.1192%;">Una casa de locos</td>
<td style="width: 1.61031%;">Comedia</td>
<td style="width: 17.7955%;">2002</td>
<td style="width: 17.4287%;">Francia</td>
<td style="width: 18.9329%;">4</td>
</tr>
<tr>
<td style="width: 6.50262%;">5</td>
<td style="width: 38.1192%;">Apolo 13</td>
<td style="width: 1.61031%;">Historia</td>
<td style="width: 17.7955%;">1995</td>
<td style="width: 17.4287%;">EEUU</td>
<td style="width: 18.9329%;">2,5</td>
</tr>
</tbody>
</table>
<h2>Clientes</h2>
<table class="exe-table" style="width: 100%;">
<thead>
<tr>
<th style="width: 1.19474%;">Socio</th>
<th style="width: 51.9715%;">Nombre</th>
<th style="width: 13.9785%;">Fecha_alta</th>
<th style="width: 1.91158%;">Telefono</th>
<th style="width: 1.19474%;">DNI</th>
<th style="width: 58.1841%;">Direccion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 1.19474%;">1</td>
<td style="width: 51.9715%;">Mar√≠a L√≥pez Perdig√≥n</td>
<td style="width: 13.9785%;">14/09/2014</td>
<td style="width: 1.91158%;">685369896</td>
<td style="width: 1.19474%;">27711498D</td>
<td style="width: 58.1841%;">Granada, 12 2¬∫A</td>
</tr>
<tr>
<td style="width: 1.19474%;">2</td>
<td style="width: 51.9715%;">Pedro Ramos Lucena</td>
<td style="width: 13.9785%;">13/10/2017</td>
<td style="width: 1.91158%;">954236742</td>
<td style="width: 1.19474%;">27148934G</td>
<td style="width: 58.1841%;">Albricias, 23 2¬∫B</td>
</tr>
<tr>
<td style="width: 1.19474%;">3</td>
<td style="width: 51.9715%;">Lucas Dobla Marcial</td>
<td style="width: 13.9785%;">02/12/2015</td>
<td style="width: 1.91158%;">723568974</td>
<td style="width: 1.19474%;">23451267Q</td>
<td style="width: 58.1841%;">Miraduero, 46</td>
</tr>
<tr>
<td style="width: 1.19474%;">4</td>
<td style="width: 51.9715%;">Luc√≠a Cabrera P√©rez</td>
<td style="width: 13.9785%;">24/02/2018</td>
<td style="width: 1.91158%;">677158523</td>
<td style="width: 1.19474%;">28565225C</td>
<td style="width: 58.1841%;">Avda. El Puerto, 9, 7¬∫A</td>
</tr>
</tbody>
</table>
<h2>Alquiler</h2>
<table class="exe-table">
<thead>
<tr>
<th>Socio</th>
<th>Pel√≠cula</th>
<th>Fecha_alquiler</th>
<th>Fecha_devolucion</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>Desperado</td>
<td>15/07/2020</td>
<td>16/07/2020</td>
</tr>
<tr>
<td>1</td>
<td>Two Much</td>
<td>23/04/2022</td>
<td>26/04/2022</td>
</tr>
<tr>
<td>3</td>
<td>Apolo 13</td>
<td>03/11/2022</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>Tesis</td>
<td>07/08/2021</td>
<td>09/08/2021</td>
</tr>
</tbody>
</table>
</div></div></div></section><section class="exe-udlContent-block js-hidden"><header class="exe-udlContent-header exe-udlContent-character-4"><h2>¬øHacemos una revisi√≥n?</h2></header><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><h4>1. ¬øEn qu√© orden crear√≠ais las tablas?</h4>
<p>Lo ideal es seguir este orden para evitar errores por claves for√°neas:</p>
<ol>
<li><strong>Socios</strong> ‚Äì porque no depende de ninguna otra tabla.</li>
<li><strong>Pel√≠culas</strong> ‚Äì tampoco depende de ninguna otra.</li>
<li><strong>Pr√©stamos</strong> ‚Äì ya que necesita referencias a Socios y Pel√≠culas.</li>
</ol>
<h4>2. ¬øPor qu√© seguir ese orden?</h4>
<p>Porque la tabla <strong>Pr√©stamos</strong> tiene claves for√°neas que apuntan a las otras dos tablas. Si las tablas <strong>Socios</strong> o <strong>Pel√≠culas</strong> no existen, no se puede insertar correctamente la informaci√≥n en Pr√©stamos sin provocar errores o dejar relaciones rotas.</p>
<h4>3. Consultas l√≥gicas (en lenguaje natural):</h4>
<ul>
<li style="list-style-type: none;">
<ul>
<li><strong>Consultar los pr√©stamos de m√°s de dos d√≠as:</strong><br>Buscar en la tabla Pr√©stamos aquellos donde la diferencia entre fecha_devoluci√≥n y fecha_prestamo sea mayor a 2 d√≠as. Cruzar esta informaci√≥n con la tabla Socios (para obtener el nombre del socio) y con Pel√≠culas (para obtener el t√≠tulo).</li>
</ul>
</li>
</ul>
<ul>
<li style="list-style-type: none;">
<ul>
<li><strong>Socios que tienen pel√≠culas en casa:</strong><br>Buscar en la <strong>tabla Pr√©stamos</strong> las filas donde <code>fecha_devoluci√≥n</code> est√© vac√≠a o sea posterior a hoy. Con ese <code>id_socio</code>, consultar en la <strong>tabla Socios</strong> el nombre y tel√©fono.</li>
</ul>
</li>
<li><strong>Cu√°nto dinero ha gastado Mar√≠a L√≥pez Perdig√≥n:</strong><br>Buscar en <strong>Socios</strong> el ID correspondiente a esa persona. Despu√©s, en la tabla Pr√©stamos, filtrar todos los registros con ese ID y sumar el importe total (si hay un campo tipo <code>precio</code> o <code>importe</code> en la tabla).</li>
</ul>
<p>üí° Esta l√≥gica es la que m√°s adelante traducir√°s a consultas SQL reales. ¬°Buen trabajo si has llegado hasta aqu√≠!</p></div></div></section></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper UDLcontentIdevice em_iDevice em_iDevice_udl_rep_gramatica" id="id46">
<div class="iDevice emphasis1" >
<header class="iDevice_header"><h1 class="iDeviceTitle">2. Empieza con SQL para definir tu base de datos</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta46_734_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-representation"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p><img src="IMG_PRO2BAC_REA04_DDL-DML.png" alt="Las dos ramas de SQL que vamos a ver: DDL y DML" title="DDL y DML" style="float: left; margin-right: 35px; margin-left: 35px;" width="204" height="223"></p>
<p>Ha llegado el momento de aprender un nuevo lenguaje que nos permitir√° convertir nuestras ideas y estructuras en una base de datos real: <strong>SQL</strong>.</p>
<p>El lenguaje SQL est√° dise√±ado espec√≠ficamente para <strong>crear, modificar y consultar bases de datos relacionales</strong>. Se compone de distintos comandos que se utilizan seg√∫n la tarea que queramos realizar.</p>
<p>Podemos dividirlos en dos grandes grupos:</p>
<ul>
<li><strong>DDL (Data Definition Language):</strong> son los comandos que permiten <strong>crear y definir</strong> nuevas bases de datos, tablas, campos e √≠ndices. Aqu√≠ aprender√°s a usar instrucciones como <code>CREATE</code>, <code>DROP</code> y <code>ALTER</code>.</li>
<li><strong>DML (Data Manipulation Language):</strong> son los comandos que sirven para <strong>consultar, insertar, modificar o eliminar</strong> datos. M√°s adelante veremos instrucciones como <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> y <code>DELETE</code>.</li>
</ul>
<p>Comenzamos por las operaciones del <strong><a href="#t33223b9c-7aca-3a07-7d15-6e7617932baf" id="link33223b9c-7aca-3a07-7d15-6e7617932baf" class="exe-tooltip definition-tt titled-tt" title="DDL | DDL">Lenguaje de Definici√≥n de Datos (DDL)</a></strong>, que permiten crear y definir nuevas bases de datos, campos e √≠ndices. ¬°Con√≥celos!</p>
<div class="exe-fx exe-tabs">
<h2>CREATE</h2>
<p>Las sentencias del DDL utilizan unos verbos que se repiten para los distintos objetos. Por ejemplo para crear un objeto nuevo el verbo ser√° CREATE y a continuaci√≥n el tipo de objeto a crear.</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>CREAR LA BASE DE DATOS<br></strong></p>
</div>
<p style="text-align: justify;">Al crear una base de datos s√≥lo hay que darle un nombre, Los nombres de base de datos deben ser √∫nicos y tendr√°n 128 caracteres m√°ximo.</p>
<p style="text-align: left;"><strong>SINTAXIS</strong></p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>CREATE DATABASE</strong> nombre_base_de_datos;<br></span></span></pre>
<p style="text-align: left;"><strong></strong></p>
<p style="text-align: left;"><strong>EJEMPLO</strong></p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>CREATE DATABASE</strong> clientesDeEmpresa;</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>CREAR TABLAS<br></strong></p>
</div>
<p style="text-align: left;">Al crear una tabla tambi√©n lo hacemos d√°ndole un nombre. Se crea en la base de datos actual y ocurre un error si la tabla existe o si la base de datos no existe.<br><strong>SINTAXIS</strong></p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>CREATE TABLE </strong>nombre_tabla<br>("columna 1" "tipo_de_datos_para_columna_1",<br>"columna 2" "tipo_de_datos_para_columna_2",<br>... ,<br>[par√°metros de la tabla]);</span></span></pre>
</div>
<div class="exe-col exe-col-2" style="text-align: left;"><strong>EJEMPLO</strong>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>CREATE TABLE</strong> CLIENTE (<br>DNI VARCHAR2(10),<br>NOMBRE VARCHAR2(20),<br>FECHA_NAC DATE NOT NULL,<br>TFNO VARCHAR2(10),<br>APELLIDOS VARCHAR2(100),<br>CONSTRAINT CLIENTE_PK PRIMARY KEY (DNI)<br>)</span></span></pre>
</div>
</div>
<h2>DROP</h2>
<p>Para eliminar un objeto utilizaremos el verbo DROP (DROP TABLE, DROP INDEX‚Ä¶).</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>BORRAR LA BASE DE DATOS<br></strong></p>
</div>
<p style="text-align: justify;">DROP DATABASE borra todas las tablas en la base de datos y borra la base de datos. Hay que ser muy cuidadoso con este comando. Retorna el n√∫mero de tablas que se eliminan. El comando borra del directorio de base de datos los ficheros y directorios que se crean durante operaciones normales.</p>
<p style="text-align: left;"><strong>SINTAXIS</strong></p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>DROP DATABASE</strong> [IF EXISTS] db_name;</span></span></pre>
<p style="text-align: left;"><strong>EJEMPLO</strong></p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>DROP DATABASE</strong> IF EXISTS mi_vieja_base_de_datos;<br></span></span></pre>
</div>
<div class="exe-col exe-col-2">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>BORRAR TABLAS<br></strong></p>
</div>
<p style="text-align: left;">Con el comando de borrado se pueden borrar una o m√°s tablas. DROP TABLE no puede utilizarse para eliminar una tabla a la que se hace referencia en una restricci√≥n FOREIGN KEY (clave ajena). Primero habr√° que eliminar la restricci√≥n FOREIGN KEY de la tabla a la que se hace referencia.</p>
<p style="text-align: left;"><strong>SINTAXIS</strong></p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>DROP TABLE</strong> nombre_de_la_tabla;<br></span></span></pre>
</div>
<div class="exe-col exe-col-2" style="text-align: left;"><strong>EJEMPLO</strong>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong></strong>Si deseamos eliminar una tabla denominada <strong>cliente</strong> <br>que creamospreviamente, simplemente ejecutamos:<br><strong>DROP TABLE</strong> Cliente;<br></span></span></pre>
</div>
</div>
<h2>ALTER</h2>
<p>La sentencia SQL <strong>ALTER</strong> se utiliza para a√±adir, eliminar o modificar columnas de una tabla.</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>SINTAXIS<br></strong></p>
</div>
<p>A. Sintaxis para <strong>agregar</strong> una columna:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;">ALTER TABLE nombretabla<br>ADD nombrecolumna tipodatocolumna;<br></span></span></pre>
<p>B. Sintaxis para <strong>eliminar</strong> una columna de una tabla:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;">ALTER TABLE nombretabla<br>DROP COLUMN nombrecolumna;<br></span></span></pre>
<p>C. Sintaxis para <strong>modificar el tipo de dato</strong> de una columna de una tabla:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;">ALTER TABLE nombretabla<br>ALTER COLUMN nombrecolumna tipodatocolumna;<br></span></span></pre>
</div>
<div class="exe-col exe-col-2">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>EJEMPLOS<br></strong></p>
</div>
<p>A. Dada la tabla <em>personas</em>, queremos a√±adir una nueva columna, denominada <em>fechadenacimiento</em>:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;">ALTER TABLE personas<br>ADD fechadenacimiento date;<br></span></span></pre>
<p>B. Dada la tabla <em>personas</em>, queremos borrar la columna, denominada <em>fechadenacimiento</em>:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;">ALTER TABLE personas<br>DROP COLUMN fechadenacimiento;<br></span></span></pre>
<p>C. Si queremos modificar el tipo de dato de la columna <em>fecha</em>, y ponerle tipo <em>year</em> en lugar de tipo <em>date</em>:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;">ALTER TABLE personas<br>ALTER COLUMN fechadenacimiento year ;<br></span></span></pre>
</div>
</div>
<div id="t33223b9c-7aca-3a07-7d15-6e7617932baf" class="exe-tooltip-text">
<p>Data Definition Language, en ingl√©s. Incluye √≥rdenes para definir, modificar o borrar las tablas en las que se almacenan los datos y las relaciones entre estas.</p>
</div>
</div>
<p>Para los diferentes tipos de datos que podr√°s usar en SQL puedes consultar los existentes aqu√≠:</p>
<p><strong><a href="https://www.w3schools.com/sql/sql_datatypes.asp" target="_blank" title="Enlace a w3schools.com" rel="noopener">Tipos de datos.</a></strong></p></div></div></section><section class="exe-udlContent-block js-hidden"><header class="exe-udlContent-header exe-udlContent-character-4"><h2><span class="sr-av">Lumen dice </span>Algunos ejemplos</h2></header><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p>Aqu√≠ puedes ver algunos ejemplos m√°s:</p>
<p style="text-align: center;"><img src="DDL_Ejemplos-2.gif" alt="Imagen animada donde se pueden ver algunos ejemplos m√°s del uso de CREATE, DROP y ALTER." title="Ejemplos DDL" width="500" height="388"></p></div><article class="exe-udlContent-content-simplified js-hidden"><header class='exe-udlContent-alt-content-title'><h2>Lectura facilitada</h2></header><p>En esta imagen podemos ver los comandos DDL: CREATE, DROP y ALTER. Se especifica que para la funcionalidad de creaci√≥n se usa CREATE DATABASE o CREATE TABLE, para la funcionalidad de modificaci√≥n se usa ALTER TABLE, ALTER COLUMN y para la funcionalidad de borrado se usa DROP TABLE, DROP DATABASE.</p>
<p>En el ejemplo 1 encontramos los comandos:<br>CREATE TABLE gente<br>(Cedula CHAR(8) PRIMARY KEY,<br>Nombre VARCHAR(20) NOT NULL,<br>Apellidos VARCHAR(20) NOT NULL)</p>
<p>ALTER TABLE Gente ADD (Edad NUMBER(2));<br>ALTER TABLE Gente DROP (Edad);</p>
<p>DROP TABLE Gente;</p>
<p><br>En el ejemplo 2 encontramos los comandos:<br>CREATE TABLE CLIENTE(<br>DNI VARCHAR2(10),<br>&INOMBRE VARCHAR2(20),<br>FECHA_NAC DATE NOT NULL,<br>TFNO VARCHAR2(10),<br>APELLIDOS VARCHAR2(100),<br>CONSTRAINT CLIENTE_PK PRIMARY KEY (DNI)<br>);</p>
<p>CREATE DATABASE mibasededatos</p>
<p>En el ejemplo 3 encontramos los comandos para el ejemplo ya trabajado en las pesta√±as.</p><button class="exe-udlContent-alt-content-hide">Cerrar</button></article></div></section><section class="exe-udlContent-block js-hidden"><header class="exe-udlContent-header exe-udlContent-character-2"><h2><span class="sr-av">Kardia dice </span>Para saber m√°s...</h2></header><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p>Debes saber que:</p>
<p>1. Una sentencia SQL es como una frase (escrita en ingl√©s ) con la que decimos lo que queremos obtener y de d√≥nde obtenerlo. Todas las sentencias empiezan con un verbo (palabra reservada que indica la acci√≥n a realizar), seguido del resto de opciones, algunas obligatorias y otras opcionales que completan la frase.</p>
<p>2. Otros comandos, adem√°s de los vistos son:</p>
<ul>
<li>SHOW TABLES: mostrar tablas.</li>
<li>DESCRIBE <nombre de="" tabla=""> para mostrar estructura de una tabla.</nombre></li>
<li>Habr√°s visto que existen, adem√°s, algunos comandos que hemos usado en los ejemplos, como:
<ul>
<li>CONSTRAINT: se usa en las instrucciones ALTER TABLE y CREATE TABLE para crear o eliminar restricciones.</li>
<li>FOREIGN KEY: identifica una columna o varias columnas, que sirven para se√±alar cu√°l es la llave primaria de otra tabla.</li>
</ul>
</li>
</ul>
<p>Algunos enlaces recomendados para consultar comandos y su uso son:</p>
<ul>
<li><a href="http://sql.11sql.com/" target="_blank" title="Accede a la web: sql.11sql" rel="noopener">http://sql.11sql.com/</a></li>
<li><a href="https://www.w3schools.com/sql/default.asp" target="_blank" title="Accede a la web: sql.11sql" rel="noopener">https://www.w3schools.com/sql/default.asp</a></li>
</ul></div></div></section></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper UDLcontentIdevice em_iDevice em_iDevice_udl_rep_gramatica" id="id47">
<div class="iDevice emphasis1" >
<header class="iDevice_header"><h1 class="iDeviceTitle">3. Consulta y modifica los datos con SQL (DML)</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta47_734_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-representation"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p style="text-align: justify;"><img src="IMG_PRO2BAC_REA04_DMLICONOS.jpg" alt="Iconos de los comandos DML usados en SQL: SELECT, INSERT, UPDATE, DELETE" title="Comandos DML SQL" style="float: left; margin-right: 10px; margin-left: 10px;" width="271" height="81">Vamos a conocer ahora las instrucciones de SQL dedicadas a llevar a cabo las tareas de consulta o modificaci√≥n de los datos contenidos en las Bases de Datos. Estos comandos forman parte del llamado <a href="#t8c966244-3c22-ed69-7158-ffecad95bb07" id="link8c966244-3c22-ed69-7158-ffecad95bb07" class="exe-tooltip definition-tt titled-tt" title="DML | DML"><strong>Lenguaje de Manipulaci√≥n de Datos (DML)</strong></a>. A continuaci√≥n tienes los cuatro comandos b√°sicos del DML, ver√°s que con ellos puedes obtener o actualizar todos los datos que desees en la base de datos:</p>
<div class="exe-fx exe-tabs">
<h2>SELECT</h2>
<p style="text-align: justify;">¬øPara qu√© solemos utillizar los comandos SQL? El uso m√°s com√∫n es la selecci√≥n de datos de las tablas en las que se encuentran. La gran mayor√≠a de operaciones que realizamos en una base de datos comienzan con una consulta. Las dos palabras claves que necesitaremos para ello son <strong>SELECT</strong> y <strong>FROM</strong>.</p>
<p style="text-align: justify;">La <strong>estructura SQL b√°sica</strong> para la consulta es:</p>
<p style="text-align: left;"><strong>SELECT "nombre_columna" FROM "nombre_tabla";</strong></p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>EJEMPLO<br></strong></p>
</div>
<p style="text-align: justify;">Para comprobar el funcionamiento del comando utilizaremos la siguiente tabla que representa la transmisi√≥n a la central de las ventas de un producto en sus sucursales:</p>
<table class="exe-table" style="width: 456px;"><caption>info_ventas</caption>
<thead>
<tr>
<th style="width: 117.983px;">ciudad</th>
<th style="width: 117.983px;">ventas</th>
<th style="width: 117.983px;">fecha_txn</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 117.983px;">Huelva</td>
<td style="width: 117.983px; text-align: right;">250</td>
<td style="width: 117.983px;">05/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">C√≥rdoba</td>
<td style="width: 117.983px; text-align: right;">1500</td>
<td style="width: 117.983px;">14/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">Ja√©n</td>
<td style="width: 117.983px; text-align: right;">300</td>
<td style="width: 117.983px;">07/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">Almer√≠a</td>
<td style="width: 117.983px; text-align: right;">700</td>
<td style="width: 117.983px;">10/01/2022</td>
</tr>
</tbody>
</table>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><span style="color: #000080;"><strong>SELECT</strong> </span>ciudad <span style="color: #000080;"><strong>FROM</strong> </span>info_ventas;</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>RESULTADO<br></strong></p>
</div>
<p>Tras ejecutar el comando anterior obtendremos:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong><u>ciudad</u></strong><br>Huelva<br>C√≥rdoba<br>Ja√©n<br>Almer√≠a</span></span></pre>
</div>
</div>
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>AMPLIACI√ìN<br></strong></p>
</div>
<p>Junto al comando SELECT suele utilizarse la cl√°usula opcional <strong>WHERE</strong>. Aunque es opcional, nos resulta muy necesaria ya que nos permite a√±adir condiciones para filtrar los datos concretos que necesitamos obtener. El comando completo ser√≠a entonces:</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>FORMATO</strong>:<br><span style="color: #000080;">SELECT</span> "nombre_columna" <span style="color: #000080;">FROM</span> "nombre_tabla"<br><span style="color: #000080;">WHERE</span> "condicion_1_de_los_datos"<br><span style="color: #000080;">AND</span> "condicion_2_de_los_datos" [...]</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>EJEMPLO</strong>:<br><span style="color: #000080;">SELECT</span> ciudad <span style="color: #000080;">FROM</span> info_ventas<br><span style="color: #000080;">WHERE</span> ventas&gt;500</span></span></pre>
</div>
</div>
<h2>INSERT</h2>
<p>Acabas de conocer c√≥mo obtener informaci√≥n de tablas. Pero ¬øC√≥mo se insertan estas filas de datos en estas tablas en primer lugar? Esto es lo que vas a aprender ahora, que realiza la instrucci√≥n&nbsp;<strong>INSERT</strong>.</p>
<p>La <strong>estructura b√°sica</strong> para insertar una nueva fila de datos en una tabla es:</p>
<p style="text-align: left;"><strong>INSERT INTO "nombre_tabla" ("columna1", "columna2", ...)</strong><br><strong>VALUES ("valor1", "valor2", ...);</strong></p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>EJEMPLO<br></strong></p>
</div>
<p>As√≠, si queremos insertar una nueva fila en la tabla <strong>info_ventas</strong> anterior, respetando siempre los tipos de tados de cada columna de la tabla para no obtener error, el comando a ejecutar ser√≠a:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong><span style="color: #000080;">INSERT</span> <span style="color: #000080;">INTO</span></strong> info_ventas (ciudad, ventas, fecha_txn)<br><strong><span style="color: #000080;">VALUES</span> </strong>('C√°diz', 900, '11/01/2022')</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>RESULTADO<br></strong></p>
</div>
<table class="exe-table" style="width: 456px;"><caption>info_ventas</caption>
<thead>
<tr>
<th style="width: 117.983px;">ciudad</th>
<th style="width: 117.983px;">ventas</th>
<th style="width: 117.983px;">fecha_txn</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 117.983px;">Huelva</td>
<td style="width: 117.983px; text-align: right;">250</td>
<td style="width: 117.983px;">05/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">C√≥rdoba</td>
<td style="width: 117.983px; text-align: right;">1500</td>
<td style="width: 117.983px;">14/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">Ja√©n</td>
<td style="width: 117.983px; text-align: right;">300</td>
<td style="width: 117.983px;">07/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">Almer√≠a</td>
<td style="width: 117.983px; text-align: right;">700</td>
<td style="width: 117.983px;">10/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">C√°diz</td>
<td style="width: 117.983px; text-align: right;">900</td>
<td style="width: 117.983px;">11/01/2022</td>
</tr>
</tbody>
</table>
</div>
</div>
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>AMPLIACI√ìN<br></strong></p>
</div>
<p style="text-align: justify;">Los comandos SQL tambi√©n se pueden anidar entre s√≠. De este modo, podr√≠amos insertar en una tabla varias filas de otra tabla diferente sustituyendo la palabra VALUES por una consulta que nos proporcione efectivamente los valores que queremos insertar. La sintaxis ser√°:</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>FORMATO</strong>:<br><span style="color: #000080;"><strong>INSERT INTO</strong> </span>"tabla1" ("columna1", "columna2", ...)<br><span style="color: #000080;"><strong>SELECT</strong> </span>"columna3", "columna4", ...<br><span style="color: #000080;"><strong>FROM</strong> </span>"tabla2";<br></span></span></pre>
</div>
<div class="exe-col exe-col-2">
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong>EJEMPLO</strong>:<br><span style="color: #000080;">INSERT INTO</span> mayores_ventas (ciudad, ventas, fecha_txn)<br><span style="color: #000080;">SELECT </span>ciudad, ventas, fecha_txn<br><span style="color: #000080;">FROM</span> info_ventas<br><span style="color: #000080;">WHERE</span> ventas&gt;500;<br></span></span></pre>
</div>
</div>
<h2>UPDATE</h2>
<p style="text-align: justify;">Una vez que hay datos en la tabla, podr√≠amos tener la necesidad de modificar los mismos. El comando <strong>UPDATE</strong> se utiliza para modificar valores en una tabla.</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<p>La <strong>sintaxis</strong> de SQL UPDATE es:</p>
<p><strong>UPDATE nombre_tabla </strong><br><strong>SET columna1 = valor1, columna2 = valor2 </strong><br><strong>WHERE columna3 = valor3</strong></p>
</div>
<div class="exe-col exe-col-2">
<p>Donde:</p>
<ul>
<li><strong>SET</strong> establece los nuevos valores para las columnas indicadas.</li>
<li><strong>WHERE</strong> sirve para seleccionar las filas que queremos modificar.</li>
<li><img src="cartoon-eyes.png" alt="Ojos" title="¬°Ojo!" width="29" height="14"> ¬°<strong>OJO</strong>!: Si omitimos la cl√°usula WHERE, por defecto, ¬°modificar√° los valores en todas las filas de la tabla!.</li>
</ul>
</div>
</div>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>EJEMPLO<br></strong></p>
</div>
<p>Si, sobre la tabla <strong>info_ventas</strong> anterior, las ventas en Huelva son 280 en vez de 250 haremos:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong><span style="color: #000080;">UPDATE</span> </strong>info_ventas<br><span style="color: #000080;"><strong>SET</strong> </span>ventas = 280<br><span style="color: #000080;"><strong>WHERE</strong> </span>ciudad = 'Huelva'<br><span style="color: #000080;"><strong>AND</strong> </span>fcha_txn = '05/01/2022';<br></span></span></pre>
</div>
<div class="exe-col exe-col-2">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>RESULTADO<br></strong></p>
</div>
<table class="exe-table" style="width: 456px;"><caption>info_ventas</caption>
<thead>
<tr>
<th style="width: 117.983px;">ciudad</th>
<th style="width: 117.983px;">ventas</th>
<th style="width: 117.983px;">fecha_txn</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 117.983px;">Huelva</td>
<td style="width: 117.983px; text-align: right;">280</td>
<td style="width: 117.983px;">05/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">C√≥rdoba</td>
<td style="width: 117.983px; text-align: right;">1500</td>
<td style="width: 117.983px;">14/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">Ja√©n</td>
<td style="width: 117.983px; text-align: right;">300</td>
<td style="width: 117.983px;">07/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">Almer√≠a</td>
<td style="width: 117.983px; text-align: right;">700</td>
<td style="width: 117.983px;">10/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">C√°diz</td>
<td style="width: 117.983px; text-align: right;">900</td>
<td style="width: 117.983px;">11/01/2022</td>
</tr>
</tbody>
</table>
</div>
</div>
<h2>DELETE</h2>
<p style="text-align: justify;">A veces podemos desear deshacernos de los registros de una tabla. Para ello, utilizamos el comando <strong>DELETE FROM</strong>.</p>
<p style="text-align: justify;">Su <strong>sintaxis</strong> es:</p>
<p style="text-align: justify;"><strong>DELETE FROM "nombre_tabla"</strong><br><strong>WHERE "condici√≥n";</strong></p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>EJEMPLO<br></strong></p>
</div>
<p>Si en la tabla anterior queremos borrar las ventas de la segunda fila:</p>
<pre style="border: 1px solid #5f1196; background: #D7D7D7;"><span style="font-size: 10pt;"><span style="color: #000000;"><span style="color: #000080;"><strong>DELETE FROM</strong></span> info_ventas<br><strong><span style="color: #000080;">WHERE</span> </strong>ciudad = 'C√≥rdoba';</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<div style="background: #5f1196; color: #ffffff;">
<p style="text-align: center;"><strong>RESULTADO<br></strong></p>
</div>
<table class="exe-table" style="width: 456px;"><caption>info_ventas</caption>
<thead>
<tr>
<th style="width: 117.983px;">ciudad</th>
<th style="width: 117.983px;">ventas</th>
<th style="width: 117.983px;">fecha_txn</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 117.983px;">Huelva</td>
<td style="width: 117.983px; text-align: right;">280</td>
<td style="width: 117.983px;">05/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">Ja√©n</td>
<td style="width: 117.983px; text-align: right;">300</td>
<td style="width: 117.983px;">07/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">Almer√≠a</td>
<td style="width: 117.983px; text-align: right;">700</td>
<td style="width: 117.983px;">10/01/2022</td>
</tr>
<tr>
<td style="width: 117.983px;">C√°diz</td>
<td style="width: 117.983px; text-align: right;">900</td>
<td style="width: 117.983px;">11/01/2022</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="t8c966244-3c22-ed69-7158-ffecad95bb07" class="exe-tooltip-text">
<p>Data Manipulation Language, en ingl√©s, es usado para recuperar y manipular datos en una base de datos relacional.</p>
</div></div></div></section></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper UDLcontentIdevice em_iDevice em_iDevice_udl_exp_competenciadigital" id="id48">
<div class="iDevice emphasis1" >
<header class="iDevice_header"><h1 class="iDeviceTitle">4. Trabaja con bases de datos SQL desde Python</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta48_742_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-representation"><section class="exe-udlContent-block js-hidden"><header class="exe-udlContent-header exe-udlContent-character-3"><h2>¬øPhyton?</h2></header><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p><img src="phyton_img.jpg" alt="IDLE Python" title="IDLE Python" style="float: left; margin: 50px 45px 50px 45px;" width="121" height="67"></p>
<p style="text-align: justify;"><a href="#te7466271-f69b-3066-ecf8-7efb73bb6c00" id="linke7466271-f69b-3066-ecf8-7efb73bb6c00" class="exe-tooltip definition-tt titled-tt" title="IDLE | Definici√≥n de IDLE"><strong>IDLE</strong></a> (Integrated DeveLopment Environment) es un entorno gr√°fico de desarrollo que permite editar y ejecutar programas en Python. Tambi√©n permite ejecutar instrucciones sueltas.</p>
<div class="exe-fx exe-tabs">
<h2>EducaAndOS</h2>
<p>En la mayor√≠a de distribuciones de Linux, entre las que se encuentra EducaAndOS, lo habitual es que Phyton est√© preinstalado y no necesitemos hacer nada para empezar a usarlo. Realiza entonces las siguientes comprobaciones:</p>
<table style="width: 100%;" class="exe-table" border="1">
<tbody>
<tr>
<td style="width: 30.2103%; vertical-align: top;">
<p style="text-align: center;">PASO 1</p>
<p>Accede al men√∫ de escritorio "Aplicaciones" y busca Python en alguna de las categor√≠as:<img src="educand_1.png" alt="Aplicaciones Educaandos" title="Aplicaciones Educaandos" style="display: block; margin-left: auto; margin-right: auto;" width="300" height="346"></p>
</td>
<td style="width: 3.86266%; vertical-align: top;">
<p style="text-align: center;">PASO 2</p>
<p>Si no lo has encontrado en ese men√∫, lo puedes lanzar desde la terminal. Para abrir la Terminal accede a Aplicaciones‚ÜíHerramientas del sistema‚ÜíTerminal:</p>
<p><img src="educand_2-1.png" alt="Terminal educaandos" title="Terminal educaandos" style="float: left;" width="835" height="74"></p>
<p>Entonces, desde la terminal, basta con escribir "python3" para abrir el entorno b√°sico de programaci√≥n:</p>
<figure class="exe-figure exe-image float-left" style="width: 814px;"><img src="educand_2-2.png" alt="terminal python3" title="terminal python3" width="814" height="196">
<figcaption class="figcaption"><a href="https://commons.wikimedia.org/w/index.php?title=User:Lamraoui_walid&amp;action=edit&amp;redlink=1" target="_blank" class="author" rel="noopener">https://commons.wikimedia.org/w/index.php?title=User:Lamraoui_walid&amp;action=edit&amp;redlink=1</a></figcaption>
</figure>
</td>
<td style="width: 64.927%; vertical-align: top;">
<p style="text-align: center;">PASO 3</p>
<p>No obstante, para poder usar su entorno integrado de desarrollo siempre se recomienda tener instalado Python para que aparezca como en paso 1. Para ello, hay que acceder a (por ejemplo EducaAndOS):</p>
<p>Aplicaciones ‚ÜíHerramientas del Sistema‚ÜíCentro de Software de EducaAndOS (Usado para instalar aquellas aplicaciones que se necesiten o aquellas que m√°s se utilicen y no vengan instaladas por defecto en la distribuci√≥n), y seleciona la categor√≠a donde estar√° la aplicaci√≥n (Herramientas de Desarrollo), pulsa en la aplicaci√≥n cuando la veas y despu√©s pulsa "Instalar".</p>
<p style="text-align: left;"><img src="educand_3.png" alt="Centro instalaci√≥n EducaAndOS" title="Centro instalaci√≥n EducaAndOS" width="800" height="372"></p>
</td>
</tr>
</tbody>
</table>
<h2>Ubuntu</h2>
<p>Al contrario que en la mayor√≠a de distribuciones de Linux, Ubuntu no trae Python preinstalado, pero se descarga e instala de manera muy sencilla desde su Web y se instala mediante el uso del terminal. Sigue estos pasos:</p>
<table style="width: 100%;" class="exe-table" border="1">
<tbody>
<tr>
<td style="width: 33.3333%; vertical-align: top;">
<p style="text-align: center;">PASO 1</p>
<h3>üü£ Paso 1: Abrir la terminal y comprobar si Python est√° instalado</h3>
<p>Abre la terminal de Ubuntu pulsando <strong>Ctrl + Alt + T</strong>. Vamos a comprobar si tienes Python 3 instalado en tu sistema. Escribe el siguiente comando:</p>
<div style="background-color: #f4f4f4; border-left: 4px solid #5f1196; padding: 10px; font-family: monospace;">python3 --version</div>
<h3>üü£ Paso 1: Abrir la terminal y comprobar si Python est√° instalado</h3>
<p>Abre la terminal de Ubuntu pulsando <strong>Ctrl + Alt + T</strong>. Vamos a comprobar si tienes Python 3 instalado en tu sistema. Escribe el siguiente comando:</p>
<div style="background-color: #f4f4f4; border-left: 4px solid #5f1196; padding: 10px; font-family: monospace;">python3 --version</div>
<p>üîé Si te aparece una versi√≥n como <code>Python 3.10.x</code>, significa que Python ya est√° correctamente instalado.</p>
<p><img src="terminal_1.jpg" alt="Terminal 1 Ubuntu de Python" title="Terminal 1 Ubuntu de Python" width="535" height="99" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p>‚úÖ En ese caso, puedes pasar directamente al Paso 3: Abrir IDLE.</p>
</td>
<td style="width: 33.3333%; vertical-align: top;">
<p style="text-align: center;">PASO 2</p>
<h3>üü£ Paso 2: Instalar y abrir IDLE en Ubuntu</h3>
<p>Si a√∫n no tienes instalado <strong>IDLE</strong> (el entorno gr√°fico para programar en Python), puedes hacerlo f√°cilmente desde la terminal. IDLE es muy √∫til para empezar a trabajar con Python de forma sencilla.</p>
<p>üîß Ejecuta los siguientes comandos para instalarlo:</p>
<div style="background-color: #f4f4f4; border-left: 4px solid #5f1196; padding: 10px; font-family: monospace;">sudo apt update<br>sudo apt install idle3</div>
<p><img src="terminal_2.jpg" alt="Terminal 2 Ubuntu de Python" title="Terminal 2 Ubuntu de Python" style="display: block; margin-left: auto; margin-right: auto;" width="808" height="268"></p>
</td>
<td style="width: 33.3333%; vertical-align: top;">
<p style="text-align: center;">PASO 3</p>
<h3>üü£ Paso 3: Abrir IDLE</h3>
<p>Una vez instalado, puedes abrir el entorno de programaci√≥n <strong>IDLE</strong> f√°cilmente desde el men√∫ de Ubuntu.</p>
<p>üîé Haz clic en el icono de aplicaciones (parte superior izquierda) y escribe <strong>IDLE</strong> en el buscador.</p>
<p>Selecciona <strong>IDLE (Python 3.x)</strong> y se abrir√° una ventana como esta:</p>
<p>üñ•Ô∏è Ah√≠ podr√°s escribir y ejecutar tus primeros programas en Python, incluyendo los relacionados con bases de datos mediante <code>sqlite3</code>.</p>
<p><img src="Paso_1.jpg" alt="Abrir el IDLE" title="Abrir el IDLE" width="619" height="241"></p>
</td>
</tr>
</tbody>
</table>
<h2>Windows</h2>
<p>Al contrario que en la mayor√≠a de distribuciones de Linux, Windows no trae Python preinstalado, pero se descarga e instala de manera muy sencilla desde su Web. Sigue estos pasos:</p>
<table style="width: 100%;" class="exe-table" border="1">
<tbody>
<tr>
<td style="width: 33.3333%; vertical-align: top;">
<p style="text-align: center;">PASO 1</p>
<p>Accede a la web del proyecto y a la secci√≥n de descargas (Download). Seleciona tu SO, dscarga el fichero ejecutable e inst√°lalo e ntu ordenador:</p>
<p style="text-align: center;"><a href="https://www.python.org/">https://www.python.org/</a></p>
<p><img src="windows_1.png" alt="Web de Python" title="Web de Python" width="1306" height="518"></p>
</td>
<td style="width: 33.3333%; vertical-align: top;">
<p style="text-align: center;">PASO 2</p>
<p>Tras instalarlo, tanto el entorno b√°sico como el entorno de desarrollo integrado est√°n disponibles en el men√∫ de Inicio, dentro de la carpeta Python:</p>
<p><img src="windows_2.jpg" alt="Python en Windows" title="Python en Windows" style="display: block; margin-left: auto; margin-right: auto;" width="229" height="117"></p>
</td>
<td style="width: 33.3333%; vertical-align: top;">
<p style="text-align: center;">PASO 3</p>
<p>El manejo de ambos entornos es id√©ntico en los dos SSOO:</p>
<p><img src="windows_3.png" alt="python command line" title="python command line" width="677" height="343"></p>
</td>
</tr>
</tbody>
</table>
</div></div></div></section><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p style="text-align: justify;"><img src="IMG_PRO2BAC_REA04_SQL-PYTHON.jpg" alt="Mujer programando en SQL en un ordenador." title="Programaci√≥n SQL" style="margin-right: 10px; margin-left: 10px; float: right;" width="150" height="150">Seguramente, despu√©s de conocer el lenguaje SQL para crear bases de datos y manipularlas, te habr√°s preguntado: ¬øY c√≥mo utilizo en mi reto este nuevo lenguaje? Realizaremos nuestro programa en Python, pero...¬øc√≥mo usar entonces otro lenguaje - SQL - para gestionar la base de datos a crear?</p>
<p style="text-align: justify;">¬°Menos mal que nuestro equipo de trabajo dispone de miembros expertos tecnol√≥gicos que, a trav√©s de este ejercicio guiado que vas a realizar aqu√≠, te van a ense√±ar c√≥mo SQL se puede <strong>integrar y usar</strong> desde tu programaci√≥n con Pyhton. ¬°Realiza todos los pasos siguientes en tu entorno de desarrollo y crea tu primera base de datos!</p>
<div style="border-left: 4px solid #5f1196; background-color: #f1edfa; padding: 1em; margin: 1em 0;"><strong>üìå Importante:</strong><br>No debes escribir los siguientes c√≥digos directamente en el Shell de Python (ventana inicial de comandos). En su lugar, sigue estos pasos:
<ol>
<li>Abre <strong>Archivo ‚Üí Nuevo archivo</strong> desde IDLE (el entorno de Python).</li>
<li>Copia y pega all√≠ los c√≥digos.</li>
</ol>
</div>
<div class="exe-fx exe-carousel">
<h2>Paso 1: Crea y conecta la base de datos</h2>
<p style="text-align: justify;">En principio no se requiere m√°s que tener Python instalado para poder trabajar con SQL gracias al <strong>m√≥dulo sqlite3</strong>, que forma parte de la librer√≠a est√°ndar de Python. La primera vez que ejecutemos este programa como no existe la base de datos <em>bdventas.db</em> se crea, consiste en un √∫nico archivo que se localiza en la misma carpeta de nuestra aplicaci√≥n.</p>
<p>Por tanto, antes de empezar a programar, vamos a crear un archivo Python donde escribiremos el c√≥digo necesario para conectarnos a una base de datos utilizando <code>sqlite3</code>.</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<pre style="border: 1px solid #5f1196;"><span style="font-size: 10pt;"><span style="color: #000000;"><strong><span style="color: #ff6600;">import</span> </strong>sqlite3<br>conexion=sqlite3.connect(<span style="color: #008000;">"bdventas.db"</span>)</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<p style="text-align: justify;">¬øQu√© has conseguido con estos comandos?</p>
<ol>
<li style="list-style-type: none;">
<ol>
<li style="text-align: justify;"><strong>Importar</strong> el m√≥dulo 'sqlite3' para poder trabajar con bases de datos SQL.</li>
<li style="text-align: justify;"><strong>Crear o abrir</strong> una conexi√≥n con una base de datos existente gracias a la funci√≥n 'connect' del m√≥dulo 'sqlite3'.</li>
</ol>
</li>
</ol>
<details>
<summary><strong>üß™ ¬øC√≥mo puedes comprobar que ha funcionado?</strong></summary>
<br>
<p>Cuando ejecutas este c√≥digo:</p>
<div style="background-color: #f4f4f4; border-left: 4px solid #5f1196; padding: 10px; font-family: monospace;">conexion = sqlite3.connect("bdventas.db")</div>
<p>Python <strong>no mostrar√° ning√∫n mensaje</strong> por pantalla. Pero eso no significa que no haya funcionado. Puedes verificarlo de dos formas:</p>
<h4>‚úÖ Opci√≥n 1: Mostrar la conexi√≥n por pantalla</h4>
<p>Escribe lo siguiente para comprobar que el objeto conexi√≥n existe:</p>
<div style="background-color: #f4f4f4; border-left: 4px solid #5f1196; padding: 10px; font-family: monospace;">print(conexion)</div>
<p>Si todo va bien, ver√°s un mensaje parecido a:</p>
<p><code><sqlite3.connection object="" at="" 0x000001c4=""></sqlite3.connection></code></p>
<h4>‚úÖ Opci√≥n 2: Verifica el archivo creado</h4>
<p>Revisa la carpeta donde est√°s trabajando. Deber√≠as ver un archivo llamado:</p>
<p><strong>bdventas.db</strong></p>
<p>Este archivo es tu base de datos creada, aunque de momento a√∫n est√° vac√≠a.</p>
</details></div>
</div>
<h2>Paso 2: Crea una tabla</h2>
<p>Una vez que se tiene una conexi√≥n se puede llamar a su m√©todo <strong>execute()</strong> para ejecutar comandos SQL.</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<pre style="border: 1px solid #5f1196;"><span style="font-size: 10pt;"><span style="color: #000000;"><span style="color: #ff6600;">try</span>:<br>   conexion.execute(<span style="color: #008000;">"""create table productos (</span><br><span style="color: #008000;">         codigo integer primary key autoincrement,</span><br><span style="color: #008000;">         nombre text,</span><br><span style="color: #008000;">         precio real</span><br><span style="color: #008000;">      )"""</span>)<br>   <span style="color: #800080;">print</span>(<span style="color: #008000;">"se creo la tabla productos"</span>) <br><span style="color: #ff6600;">except</span> sqlite3.OperationalError:<br>   <span style="color: #800080;">print</span>(<span style="color: #008000;">"La tabla productos ya existe"</span>)</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<p>Este bloque de c√≥digo:</p>
<ul>
<li style="text-align: justify;">Utiliza un <strong>try/except</strong> en el momento de crear la tabla porque si ejecutamos por segunda vez este programa se tratar√° de crear nuevamente la tabla 'articulos' y, al ya existir, se genera una excepci√≥n de tipo <em>OperationalError.</em></li>
</ul>
<details>
<summary><strong>¬øQu√© hace este c√≥digo? ¬°Vamos a entenderlo paso a paso!</strong></summary>
<p>Este ejemplo crea una tabla llamada <code>productos</code> dentro de la base de datos <strong>bdventas.db</strong>, que se cre√≥ en el paso anterior. A continuaci√≥n te explicamos qu√© hace cada parte del c√≥digo:</p>
<ul>
<li><code>import sqlite3</code>: importa el m√≥dulo necesario para trabajar con bases de datos en Python.</li>
<li><code>sqlite3.connect("bdventas.db")</code>: crea (si no existe) o abre la base de datos <strong>bdventas.db</strong> en la misma carpeta del programa. Se guarda en la variable <code>conexion</code>.</li>
<li><code>conexion.execute(...)</code>: ejecuta el c√≥digo SQL que est√° dentro, en este caso para crear una tabla.</li>
<li>La tabla <code>productos</code> tiene 3 atributos:
<ul>
<li><code>codigo</code>: clave primaria, es un n√∫mero entero que se genera autom√°ticamente (gracias a <code>autoincrement</code>).</li>
<li><code>nombre</code>: texto que almacena el nombre del producto.</li>
<li><code>precio</code>: n√∫mero decimal que indica el precio del producto.</li>
</ul>
</li>
<li><code>try / except</code>: sirve para controlar errores. Si el programa intenta crear la tabla y esta ya existe, se lanza una excepci√≥n y se muestra un mensaje.</li>
</ul>
<h3>üîÅ ¬øSe puede reutilizar este ejemplo?</h3>
<p>¬°Claro que s√≠! Este c√≥digo sirve como <strong>plantilla</strong>. Solo tienes que cambiar:</p>
<ul>
<li>El nombre de la tabla (<code>productos</code>) por <code>clientes</code>, <code>servicios</code>, o cualquier otra.</li>
<li>Los atributos (columnas) seg√∫n lo que necesites almacenar.</li>
<li>El tipo de datos de cada atributo: <code>text</code>, <code>integer</code>, <code>real</code>, <code>date</code>, etc.</li>
</ul>
<p>¬°Recuerda definir correctamente la <strong>clave primaria</strong> y, m√°s adelante, tambi√©n las <strong>claves ajenas</strong> si hay relaciones!</p>
</details></div>
</div>
<h2>Paso 3: Inserta filas en la tabla</h2>
<p>Vamos a insertar tres filas en la tabla anterior creada:</p>
<pre style="border: 1px solid #5f1196;"><span style="font-size: 10pt; color: #000000;">conexion.execute(<span style="color: #008000;">"insert into productos(nombre,precio) values (?,?)"</span>, (<span style="color: #008000;">"ventilador"</span>, 41.50))<br>conexion.execute(<span style="color: #008000;">"insert into productos(nombre,precio) values (?,?)"</span>, (<span style="color: #008000;">"taburete"</span>, 34))<br>conexion.execute(<span style="color: #008000;">"insert into productos(nombre,precio) values (?,?)"</span>, (<span style="color: #008000;">"tostador"</span>, 15))<br>conexion.commit()</span></pre>
<p>En este c√≥digo:</p>
<ul>
<li style="list-style-type: none;">
<ul>
<li>Se llama a <strong>execute</strong> pas√°ndole como primer par√°metro un comando SQL '<strong>insert</strong>' con el car√°cter '<strong>?</strong>' indicando las posiciones donde se van a sustituir los valores que vienen a continuaci√≥n.</li>
<li>Tras efectuar todos los insert debemos llamar a '<strong>commit</strong>' para que se actualicen los datos realmente en la tabla de la base de datos.</li>
</ul>
</li>
</ul>
<details>
<summary><strong>¬øQu√© significa exactamente este c√≥digo?</strong></summary>
<p>Este c√≥digo sirve para <strong>insertar datos</strong> en la tabla <code>productos</code> que ya has creado anteriormente. Vamos l√≠nea por l√≠nea:</p>
<ul>
<li><code>execute("insert into productos(nombre, precio) values (?, ?)", (...))</code>: Es una instrucci√≥n para insertar datos. Los <code>?</code> son marcadores de posici√≥n que se sustituyen por los valores reales (nombre y precio).</li>
<li>Se repite tres veces, insertando <code>ventilador</code>, <code>taburete</code> y <code>tostador</code>.</li>
<li><code>conexion.commit()</code>: Guarda todos los cambios realizados. Si no se ejecuta, los datos no se guardar√°n realmente en el archivo de la base de datos.</li>
</ul>
<p>üí° Este es un buen momento para pensar en tu propio proyecto: ¬øQu√© productos, clientes o servicios vas a insertar t√∫? Pronto lo pondr√°s en pr√°ctica.</p>
</details>
<h2>Paso 4: Recupera todas las filas de una tabla</h2>
<p>Vamos a programar una estructura <strong>SELECT</strong> para obtener todas las filas de nuestra tabla.</p>
<p>El siguiente fragmento de c√≥digo permite <strong>consultar todos los datos almacenados</strong> en la tabla <code>productos</code> de la base de datos.</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<pre style="border: 1px solid #5f1196;"><span style="font-size: 10pt;"><span style="color: #000000;">cursor= (conexion.execute(<span style="color: #008000;">"select codigo,<br>         nombre,precio from productos"</span>))<br><span style="color: #ff6600;">for</span> fila <span style="color: #ff6600;">in</span> cursor:<br>   <span style="color: #800080;">print</span>(fila)</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<p>En este c√≥digo:</p>
<ul>
<li>El m√©todo execute retorna un objeto de la clase <strong>Cursor</strong> que se guarda en la variable del mismo nombre.</li>
<li>Recorremos la variable sacando por pantalla cada fila.</li>
</ul>
</div>
<details>
<summary><strong>¬øQu√© est√° haciendo este c√≥digo?</strong></summary>
<p>Vamos paso a paso a entender qu√© se est√° realizando:</p>
<ul>
<li><code>conexion.execute("select codigo, nombre, precio from productos")</code>: esta instrucci√≥n <strong>SELECT</strong> busca todos los registros de la tabla <code>productos</code> y selecciona espec√≠ficamente las columnas <code>codigo</code>, <code>nombre</code> y <code>precio</code>.</li>
<li>El resultado de la consulta se guarda en la variable <code>cursor</code>. Esta variable es un <strong>objeto de tipo cursor</strong>, que sirve para recorrer fila por fila los datos obtenidos de la base de datos.</li>
<li><code>for fila in cursor:</code> permite recorrer cada fila obtenida. Cada <code>fila</code> es una tupla con los datos de un producto (c√≥digo, nombre, precio).</li>
<li><code>print(fila)</code> muestra por pantalla cada fila (es decir, cada producto con sus datos).</li>
</ul>
<p>‚úÖ Esta estructura es muy √∫til para mostrar informaci√≥n al usuario o para comprobar si los datos est√°n correctamente guardados en la tabla.</p>
</details></div>
<h2>Paso 5: Recupera una fila de la tabla</h2>
<p>Vamos a crear un programa que pida al usuario el c√≥digo de un producto y, si lo encuentra en la base de datos, mostrar√° su nombre y su precio por pantalla. Te aconsejo que lo utilices y practiques.</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<div class="highlighted-code language-python">
<div>
<pre><code>codigo=int(input("Ingrese el c√≥digo de un art√≠culo:"))
cursor=(conexion.execute("select nombre,precio from productos 
      where codigo=?", (codigo, )))
fila=cursor.fetchone()
if fila!=None:
   print(fila)
else:
   print("No existe un art√≠culo con dicho c√≥digo.")</code></pre>
</div>
</div>
</div>
<div class="exe-col exe-col-2">
<p><strong>En este programa:</strong></p>
<ul>
<li>El m√©todo <code>fetchone</code> de la clase <em>Cursor</em> retorna una tupla con la fila de la tabla que coincide con el c√≥digo ingresado o retorna <code>'None'</code>.</li>
</ul>
<details>
<summary><strong>¬øQu√© hace exactamente este programa? Explicaci√≥n paso a paso</strong></summary>
<ul>
<li style="list-style-type: none;">
<ul style="list-style-type: disc;">
<li><strong>1. Solicita al usuario</strong> que introduzca el <code>c√≥digo</code> de un producto. Este dato se guarda en la variable <code>codigo</code>.</li>
<li><strong>2. Ejecuta una consulta SQL con SELECT:</strong> busca en la tabla <code>productos</code> las columnas <code>nombre</code> y <code>precio</code> del producto cuyo c√≥digo coincide con el que ha introducido el usuario.<br>La l√≠nea de c√≥digo usada es:<br><code>cursor = conexion.execute("SELECT nombre, precio FROM productos WHERE codigo=?", (codigo,))</code></li>
</ul>
</li>
</ul>
<div style="background-color: #fff3cd; border: 1px solid #ffeeba; padding: 10px; margin-top: 10px; text-align: left;">
<p><strong>¬øQu√© deber√≠as cambiar si usas otra base de datos?</strong><br>Esta consulta se adapta f√°cilmente. Observa c√≥mo puedes modificarla:</p>
<ul>
<li><code>SELECT campo1, campo2</code> ‚Üí Cambia los nombres de los campos que quieres obtener.</li>
<li><code>FROM nombre_tabla</code> ‚Üí Sustituye <code>productos</code> por la tabla de tu proyecto.</li>
<li><code>WHERE nombre_campo=?</code> ‚Üí Cambia <code>codigo</code> por el campo que usar√°s como filtro.</li>
</ul>
<p><strong>Ejemplo gen√©rico:</strong><br><code>cursor = conexion.execute("SELECT campo1, campo2 FROM tabla WHERE campo_clave=?", (valor_buscado,))</code><br>Esto te permitir√° obtener datos filtrados de cualquier tabla, siempre que sustituyas los elementos entre comillas por los de tu propio proyecto.</p>
</div>
<ul style="list-style-type: disc;">
<li><strong>3. Recupera los datos con <code>fetchone()</code>:</strong> Si existe una fila que cumpla con la condici√≥n, se guarda en la variable <code>fila</code>.</li>
<li><strong>4. Comprueba si hay resultado:</strong> si se ha encontrado una fila, muestra el nombre y precio; si no, indica que no hay resultados.</li>
</ul>
</details></div>
</div>
<h2>Paso 6: Recupera varias filas de la tabla</h2>
<p>Para ver c√≥mo recuperar varias filas, vamos a realizar un programa que pida un precio por pantalla y nos muestre todos los productos de precio menor al introducido:</p>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<pre style="border: 1px solid #5f1196;"><span style="font-size: 10pt;"><span style="color: #000000;">precio=float(input("Ingrese un precio:"))<br>cursor= (conexion.execute(<span style="color: #008000;">"select nombre from articulos <br>      where precio&lt;?"</span>, (precio, )))<br>filas=cursor.fetchall()<br><span style="color: #ff6600;">if</span> <span style="color: #800080;">len</span>(filas)&gt;0:<br>   <span style="color: #ff6600;">for</span> fila <span style="color: #ff6600;">in</span> filas:<br>      <span style="color: #800080;">print</span>(fila)<br>   <span style="color: #ff6600;">else</span>:<br>      <span style="color: #800080;">print</span>(<span style="color: #008000;">"No existen art√≠culos con un precio menor <br>         al ingresado."</span>)<br>conexion.close()</span></span></pre>
</div>
<div class="exe-col exe-col-2">
<p><strong>¬øQu√© has realizado en este programa?</strong></p>
<ul>
<li>Ahora, el resultado del comando 'select' pueden ser muchas filas.</li>
<li>El m√©todo <strong>'fetchall'</strong> de la clase Cursor nos retorna una lista con todas las filas de la tabla que cumplen la condici√≥n dada.</li>
<li>¬°No olvides cerrar siempre la conexi√≥n al terminar con el m√©todo <code>close()</code>!</li>
</ul>
<details>
<summary><strong>¬øQu√© hace exactamente este programa? Explicaci√≥n paso a paso</strong></summary>
<ul>
<li><strong>1. Solicita al usuario</strong> un valor de <code>precio</code> que ser√° usado como filtro para mostrar art√≠culos con un precio menor.</li>
<li><strong>2. Ejecuta una consulta SQL con SELECT:</strong> busca en la tabla <code>articulos</code> todos los nombres cuyo precio sea inferior al que ha introducido el usuario.</li>
<li><strong>3. Recupera m√∫ltiples filas</strong> con <code>fetchall()</code>: se almacena una lista con todas las filas que cumplen la condici√≥n.</li>
<li><strong>4. Recorre los resultados:</strong> si hay resultados, se imprime cada uno. Si no hay coincidencias, muestra un mensaje informativo.</li>
<li><strong>5. Cierra la conexi√≥n:</strong> se finaliza la conexi√≥n con <code>conexion.close()</code>.</li>
</ul>
<div style="background-color: #fff3cd; border: 1px solid #ffeeba; padding: 10px; margin-top: 10px; text-align: left;">
<p><strong>¬øQu√© deber√≠as cambiar si usas otra base de datos?</strong><br>Este programa es reutilizable. Solo necesitas ajustar algunos elementos:</p>
<ul>
<li><code>SELECT campo1</code> ‚Üí Cambia el nombre del campo que quieres recuperar.</li>
<li><code>FROM nombre_tabla</code> ‚Üí Sustituye <code>articulos</code> por la tabla de tu proyecto.</li>
<li><code>WHERE campo &lt; ?</code> ‚Üí Cambia <code>precio</code> por el campo num√©rico que deseas comparar.</li>
</ul>
<p><strong>Ejemplo gen√©rico:</strong></p>
<code>cursor = conexion.execute("SELECT campo1 FROM tabla WHERE campo_num &lt; ?", (valor,))</code>
<p>Esto mostrar√° todos los valores de <code>campo1</code> cuya condici√≥n con respecto a <code>campo_num</code> sea menor al <code>valor</code> indicado.</p>
</div>
</details></div>
</div>
<h2>¬°Ahora te toca a ti!</h2>
<p>¬°Ha llegado el momento de aplicar todo lo aprendido en esta secci√≥n! A lo largo de los apartados anteriores.</p>
<p>En esta actividad final del bloque, deber√°s crear una nueva base de datos que contenga las siguientes tres tablas. Observa atentamente su estructura y datos:</p>
<p style="text-align: center;"><strong>Pel√≠culas</strong></p>
<img src="Tpeliculas.png" alt="Tabla Pel√≠culas" width="1378" height="270" style="display: block; margin-left: auto; margin-right: auto;">
<p style="text-align: center;"><strong>Clientes</strong></p>
<img src="Tclientes.png" alt="Tabla Clientes" width="2090" height="228" style="display: block; margin-left: auto; margin-right: auto;">
<p style="text-align: center;"><strong>Alquiler</strong></p>
<img src="Talquiler.png" alt="Tabla Alquiler" width="494" height="235" style="display: block; margin-left: auto; margin-right: auto;">
<div style="border: 2px solid #0073aa; background-color: #e7f3fe; padding: 15px; margin-top: 20px;">
<h3>üîπ Actividad: Crea la base de datos y responde a las consultas</h3>
<p>Con los conocimientos adquiridos, deber√°s:</p>
<ol>
<li>Crear una base de datos que contenga las tres tablas anteriores con sus datos.</li>
<li>Dise√±ar las tablas con las relaciones necesarias (PK y FK donde proceda).</li>
<li>Insertar los datos tal y como aparecen en las im√°genes.</li>
<li>Crear consultas que respondan a las siguientes preguntas:</li>
</ol>
<ul>
<li>Mostrar personas que se hicieron socias a partir de 2017</li>
<li>¬øCu√°l es el precio medio de una pel√≠cula en el videoclub?</li>
<li>Muestra en pantalla los pr√©stamos que a√∫n no han sido devueltos, visualizando el <strong>nombre del socio</strong> y el <strong>t√≠tulo de la pel√≠cula</strong>.</li>
</ul>
</div>
<h3>üîÑ Hoja de ruta recomendada</h3>
<ol>
<li>Revisa el <strong>Paso 1</strong> y <strong>Paso 2</strong> para crear la base de datos y sus tablas con <code>CREATE</code>.</li>
<li>Inserta los datos usando el <strong>Paso 3</strong> con <code>INSERT INTO</code>.</li>
<li>Consulta datos aplicando <code>SELECT</code> con <code>WHERE</code>, como hicimos en los <strong>Pasos 4, 5 y 6</strong>.</li>
<li>Recuerda cerrar la conexi√≥n con <code>conexion.close()</code>.</li>
</ol>
<h3>üìÑ Entrega</h3>
<p>Sube a Moodle un documento PDF que contenga:</p>
<ul>
<li>C√≥digo fuente usado para crear e insertar los datos.</li>
<li>C√≥digo de cada consulta con su resultado.</li>
<li>Capturas de pantalla de la ejecuci√≥n en tu entorno (opcional pero recomendado).</li>
</ul>
<p>¬°Demuestra todo lo que sabes y convi√©rtete en un verdadero maestro/a de SQL!</p>
</div></div></div></section><section class="exe-udlContent-block js-hidden"><header class="exe-udlContent-header exe-udlContent-character-4"><h2><span class="sr-av">Lumen dice </span>¬øSabes c√≥mo afrontar los √∫ltimos puntos del ejercicio?</h2></header><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><div style="background-color: #f0f0f0; padding: 10px; border-left: 4px solid #6a1b9a;">
<p>Para calcular la <strong>media</strong> o <em>promedio</em> de una columna num√©rica en SQL, utilizamos la funci√≥n <code>AVG()</code>. Esta funci√≥n forma parte del conjunto de funciones de agregaci√≥n que hemos aprendido.</p>
<ol>
<li>Usa <code>SELECT AVG(nombre_columna)</code> para calcular la media de esa columna.</li>
<li>Indica la tabla de la que quieres obtener el dato usando <code>FROM nombre_tabla</code>.</li>
<li>¬°Y listo! No necesitas WHERE si quieres calcular la media de toda la columna.</li>
</ol>
<p><strong>Ejemplo</strong>: ¬øCu√°l es el precio medio de las pel√≠culas disponibles?</p>
<div style="background-color: #ffffff; border: 1px solid purple; padding: 8px; font-family: monospace;">SELECT AVG(Precio) FROM Pel√≠culas</div>
</div>
<div style="background-color: #f0f0f0; padding: 10px; border-left: 4px solid #6a1b9a;">
<p>Para realizar consultas que necesiten informaci√≥n de varias tablas a la vez, debes combinarlas adecuadamente. Aqu√≠ te explicamos c√≥mo hacerlo paso a paso:</p>
<ol>
<li>En <strong>FROM</strong> deber√°s escribir todas las tablas que vayas a utilizar, separadas por comas.</li>
<li>En <strong>WHERE</strong> deber√°s relacionar esas tablas usando los campos comunes (por ejemplo: <code>Clientes.Socio = Alquiler.Socio</code>).</li>
<li>Cuando uses campos de varias tablas, debes especificar siempre el nombre de la tabla delante del campo, seguido de un punto: <code>Tabla.Campo</code>.</li>
</ol>
<p><strong>Ejemplo:</strong> ¬øQu√© socio ha alquilado la pel√≠cula <em>"Desperado"</em>? Queremos obtener su nombre:</p>
<div style="background-color: #ffffff; border: 1px solid purple; padding: 8px; font-family: monospace;">SELECT Clientes.nombre<br>FROM Clientes, Alquiler<br>WHERE Clientes.Socio = Alquiler.Socio<br>AND Alquiler.Pelicula = 'Desperado'</div>
</div>
<div style="background-color: #f9f9f9; border-left: 4px solid #5f1196; padding: 10px; margin-top: 15px;">
<p><strong>¬øY si un campo est√° vac√≠o?</strong> En SQL, cuando un campo no tiene valor, se escribe como <code>IS NULL</code>. Si quieres comprobar que s√≠ tiene valor, se usa <code>IS NOT NULL</code>.</p>
<p><strong>Ejemplo:</strong> Ver los pr√©stamos que a√∫n no han sido devueltos:</p>
<pre style="border: 1px solid #5f1196; background-color: #ffffff; padding: 10px;"><code>SELECT * FROM Alquiler  
WHERE Fecha_devolucion IS NULL;</code></pre>
</div></div></div></section></div>
</div>
</div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licencia Creative Commons Reconocimiento Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="32_de_los_esquemas_al_sistema_crea_las_tablas_y_normaliza_tu_base_de_datos.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><span class="page-counter">P√°gina <strong>8</strong> de <strong>12</strong></span> <span class="sep">| </span><a href="41_cuando_los_datos_crecen_big_data_y_nuevas_formas_de_almacenarlos.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Creado con eXeLearning<span> (Ventana nueva)</span></span></a></p><script type="text/javascript" src="_intef_js.js"></script></body></html>